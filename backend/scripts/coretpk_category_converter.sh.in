#!/bin/sh
FILE_NAME=$1
TMP_FILE=`mktemp`

if [ -z "$1" ]
then
	echo "error!"
	exit 2
fi

cp $FILE_NAME $TMP_FILE

awk 'BEGIN {
    exist=0;
}
{
	if ($0 ~ "com.samsung.wmanager.WATCH_APP") exist=1;
	if ($0 ~ "</ui-application>" && !exist)
    {
        print "<category name=\"com.samsung.wmanager.WATCH_APP\" />"
        print
        exist=0;
    }
  else
    {
        print
    }
}' $TMP_FILE > $FILE_NAME
rm $TMP_FILE -f